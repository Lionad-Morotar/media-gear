<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>听说你还在手写懒加载?</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.1d892cb8.css" as="style"><link rel="preload" href="/assets/js/app.52fd016b.js" as="script"><link rel="preload" href="/assets/js/4.98b79307.js" as="script"><link rel="prefetch" href="/assets/js/2.e34ca3aa.js"><link rel="prefetch" href="/assets/js/3.dbcd6953.js"><link rel="prefetch" href="/assets/js/5.410cc264.js"><link rel="prefetch" href="/assets/js/6.63e7be84.js"><link rel="prefetch" href="/assets/js/7.2cecd144.js"><link rel="prefetch" href="/assets/js/8.3c5f31fc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1d892cb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1 id="听说你还在手写懒加载"><a href="#听说你还在手写懒加载" aria-hidden="true" class="header-anchor">#</a> 听说你还在手写懒加载?</h1> <p>过去, 我们对含有大量图片的网站进行优化无外乎要依靠JS逻辑或是相关插件来完成, 比如<code>懒加载</code>技术. 而现在(至少在不久的将来), Chrome 75版本将增加<code>原生懒加载</code>功能.</p> <p><img src="2019-04-23-01-30-25.png" alt="原生懒加载"></p> <h3 id="直接开始使用"><a href="#直接开始使用" aria-hidden="true" class="header-anchor">#</a> 直接开始使用</h3> <p>当然, 你也可以现在就开始体验这一功能, 在浏览器的标签栏输入<code>browser://flags/#enable-lazy-image-loading</code>并进入页面, 找到<code>enable-lazy-image-loading</code>这一项打开它, 重启后即可使用.</p> <p><img src="2019-04-23-00-45-26.png" alt="如何开启"></p> <h3 id="标准之下"><a href="#标准之下" aria-hidden="true" class="header-anchor">#</a> 标准之下</h3> <p>有关<code>loading</code>的使用, 我相信你想知道更多, 你可以使用以下三个属性来定义浏览器加载行为:</p> <ul><li>lazy: 使用懒加载, 当屏幕滚动到图片附近时</li> <li>eager: 立即加载图片</li> <li>auto: 由浏览器自行决定</li></ul> <p>有关懒加载的讨论, 你可以通过这个<a href="https://github.com/whatwg/html/pull/3752" target="_blank" rel="noopener noreferrer"><code>issue</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>进一步探索.</p> <h3 id="开始使用新代码"><a href="#开始使用新代码" aria-hidden="true" class="header-anchor">#</a> 开始使用新代码</h3> <p>也许你想把这一特征立即运用到你的项目中, 但是你别忘了至少目前为止他还是实验性的功能, 所以需要做功能检测, 对不支持的浏览器进行兼容:</p> <p><img src="2019-04-23-01-37-31.png" alt="功能检测"></p> <p>仅仅这样还不够, 为了不使你的Image标签被不支持<code>loading</code>属性的浏览器立即加载出来, 你还需要把<code>src</code>属性替换为其它属性, 同时还得考虑浏览器不支持JS的情况, 比如像这样做:</p> <p><img src="2019-04-23-01-31-00.png" alt="兼容"></p> <h3 id="抛弃非原生懒加载"><a href="#抛弃非原生懒加载" aria-hidden="true" class="header-anchor">#</a> 抛弃非原生懒加载?</h3> <p>抛弃非原生懒加载? 答案在任何情况下都是<code>否</code>.</p> <p>如果未来浏览器都支持懒加载, 并且标准较现在没有改变的话, 它只适用于一些简单的网页浏览场景, 比如像掘金这种文本和图片混排的页面.对于特殊场景下, 比如<a href="https://juejin.im/post/5cbd30e7e51d456e803516ba" target="_blank" rel="noopener noreferrer">这位老哥<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的这篇文章里描绘的问题, 我们还是得需要根据需求, 书写大量原生JS逻辑.除非问题本质得到解决, 否者<strong>任何在体验上的优化, 都是优化一部分场景的性能, 而放弃另一部分场景的性能</strong>(甚至负优化)</p> <h3 id="最后"><a href="#最后" aria-hidden="true" class="header-anchor">#</a> 最后</h3> <p>文中代码图片是使用<a href="https://carbon.now.sh" target="_blank" rel="noopener noreferrer"><code>Carbon</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>合成的, 掘金的代码高亮实在是... 么得办法~~</p> <h3 id="references"><a href="#references" aria-hidden="true" class="header-anchor">#</a> References</h3> <blockquote><p><a href="https://addyosmani.com/blog/lazy-loading/" target="_blank" rel="noopener noreferrer">Native image lazy-loading for the web!<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <blockquote><p><a href="https://github.com/whatwg/html/pull/3752" target="_blank" rel="noopener noreferrer">Lazyload images and iframes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <blockquote><p><a href="https://github.com/dwqs/blog/issues/74" target="_blank" rel="noopener noreferrer">图片和视频的懒加载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <blockquote><p><a href="http://medium.yintage.com/?p=44" target="_blank" rel="noopener noreferrer">极致性能 – 图片渐进显示和懒加载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.52fd016b.js" defer></script><script src="/assets/js/4.98b79307.js" defer></script>
  </body>
</html>
